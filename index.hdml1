<!DOCTYPE html>
<html>
<head>
  <title>ESP32 Control Panel</title>
  <style>
    body {
      font-family: Arial;
      text-align: center;
      margin-top: 50px;
      background: #0f172a;
      color: white;
    }

    button {
      padding: 12px 25px;
      margin: 10px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }

    .on { background: #22c55e; }
    .off { background: #ef4444; }

    #status {
      margin-top: 20px;
      font-size: 18px;
      font-weight: bold;
    }
  </style>
</head>
<body>

<h2>ESP32 LED Control</h2>

<button id="onBtn" class="on">Turn ON</button>
<button id="offBtn" class="off">Turn OFF</button>

<div id="status">Status: Loading...</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
  import { getDatabase, ref, set, onValue } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-database.js";

  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "i0t-workshop.firebaseapp.com",
    databaseURL: "https://i0t-workshop-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "i0t-workshop",
    storageBucket: "i0t-workshop.firebasestorage.app",
    messagingSenderId: "434236596541",
    appId: "1:434236596541:web:3cb5e6b1b16d7d2e3b2554"
  };

  const app = initializeApp(firebaseConfig);
  const database = getDatabase(app);

  const ledRef = ref(database, "devices/esp1/LED");

  // Buttons
  document.getElementById("onBtn").addEventListener("click", () => {
    set(ledRef, "ON");
  });

  document.getElementById("offBtn").addEventListener("click", () => {
    set(ledRef, "OFF");
  });

  // Real-time status listener
  onValue(ledRef, (snapshot) => {
    const state = snapshot.val();
    document.getElementById("status").innerText = "Status: " + state;
  });

</script>

</body>
</html>

